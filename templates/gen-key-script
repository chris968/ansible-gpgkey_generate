%echo Generating a basic OpenPGP key
{% if ansible_distribution == "Ubuntu" %}
Key-Type: 1
Subkey-Type: 1
{% else %}
Key-Type: default
Subkey-Type: default
{% endif %}
Key-Length: {{ gpg_keylength }}
Subkey-Length: {{ gpg_subkeylength }}
Name-Real: {{ gpg_realname }}
Name-Email: {{ gpg_useremail }}
Expire-Date: {{ gpg_expire }}
{% if gpg_passphrase is defined and gpg_passphrase %}
Passphrase: {{ gpg_passphrase }}
{% endif %}
%pubring {{ gpg_pubkeyfile }}
%secring {{ gpg_privkeyfile }}
%commit
%echo done
